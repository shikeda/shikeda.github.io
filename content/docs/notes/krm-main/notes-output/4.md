---
title: "VS CodeとTeX Live"
weight: 34
---

## VS CodeとTeX Live

VS Code (Visual Studio Code) はMicrosoftが
開発しているWindows、Linux、macOS、web用のソースコードエディタである。

まずは、toyjack'blogoの
[vscodeでlualatex](https://toyjack.net/2022/04/06/lualatex-with-vscode/)
を参照する。

ポイントは次の2点。

1. latexmkを利用するため.latexmkrcを設定。
2. VS Codeのプラグイン（LaTeX Workshop）とsettings.jsonの設定。

## LaTeX、LuaLaTeXの日本語組版の参考記事

参考になりそうな記事やテンプレートがあるサイト。

- [私家版日本語 LaTeX テンプレート（2017年5月版）](https://id.fnshr.info/2017/05/20/my-latex-templates-201705/)  jlreq ドキュメントクラス
- [LuaLaTeXで日本語文書を作成する際のヒントや気になったこと](https://lualatexlab.blog.fc2.com/blog-entry-62.html)  【基本】LuaLaTeXで縦書きする
- [LaTeX（LuaLaTeX） で A5・縦書き・2段組の小説本・エッセイ本を作る](https://adbird.hatenablog.com/entry/2018/12/27/161700)
- [日本語 LaTeX の新常識 2021](https://qiita.com/wtsnjp/items/76557b1598445a1fc9da)
– [[LaTeX] fn2end --- footnote を endnote に変換する](https://konoyonohana.blog.fc2.com/blog-entry-424.html)
- [jlreq](https://www.tug.org/texlive//Contents/live/texmf-dist/doc/latex/jlreq/jlreq-ja.html)
- [jlreq sample](https://github.com/zr-tex8r/latex-jlreq-sample)
- [adbird（広告鳥） 備忘録](https://adbird.hatenablog.com/archive/category/LaTeX)
- [金水敏 TeX のページ](http://www.let.osaka-u.ac.jp/~kinsui/tex/top.htm)
- [『訓点語と訓点資料』用スタイル・ファイル](http://www.let.osaka-u.ac.jp/~kinsui/tex/hokok98/1213c/c.html)



## jlreqのテンプレート

訓点語学会の機関誌『訓点語と訓点資料』のスタイル・ファイルは上記した
[『訓点語と訓点資料』用スタイル・ファイル](http://www.let.osaka-u.ac.jp/~kinsui/tex/hokok98/1213c/c.html)のkunj2e11.styが参考になる。
その仕様は次にようになっている。

1. ページのレイアウト
2. 論文題目・著者名の設定（\title、\author、\maketitle）
3. 注番号表示（\chuu）
4. 論文末注釈一覧形式（chuulist 環境）
5. 凡例一覧形式（hanrei 環境）
6. 参考文献一覧形式（shomeilist 環境）
7. 丸括弧による注記（ポイントを落として表示する。\skakko）

しかしそのままでは、LuaLaTeXで使うことができない。
そこで、同様のことができるようにしてみたい。


『訓点語と訓点資料』は、B5判2段組縦書きである。
論文執筆者は、A4判で印刷したものを所定の台紙に貼り付けて、
提出すると、B5判に縮小して印刷するという方式である。
以下は、LuaLaTeXでjlreqを使うための設定の備忘録である。

[jlreq](https://www.tug.org/texlive//Contents/live/texmf-dist/doc/latex/jlreq/jlreq-ja.html)の説明がわかりやすい。


### ページのレイアウト（基本版面）

まず、documentclassで基本版面を設定する。

これは『訓点語と訓点資料』スタイル・ファイル（kunj2e11.sty）の仕様

高山寺典籍文書綜合調査団の『研究報告論集』の仕様をベースにして
みる。

- Ａ４判　マージン上端・下端・左端・右端とも各２４ｍｍ
- 題目・氏名段抜き(一段組) ５行取り　題目１８ポ　著者氏名１４ポ
- 本文原則２段組２５行取り　１行３０字詰(１１ポ)　段間１４㎜

実際の設定。

~~~tex
\documentclass[
lualatex,                   % lualatexを使う
report,                     % デフォルトは横書きのarticle相当、report、bookもある
tate,                       % 縦書き、デフォルトは横書き
oneside,                    % 奇数/偶数ページを同じレイアウト、articleとreportでのデフォルト
%twoside,                   % 奇数/偶数ページを異なるレイアウト、bookでのデフォルト
notitlepage,                % 標題・概要のページの設定、bookはtilepageがデフォルト、それ以外はnotitlepage
twocolumn,                       % 二段組、onecolumnがデフォルト
paper=a4,                        % 用紙サイズ
fontsize=11pt, jafontsize=11pt,    % フォントサイズ、ptでの設定
%fontsize=13Q, jafontsize=13Q,    % フォントサイズ、Qでの設定
line_length=30zw,                % 一行の文字数（zw=全角一文字の幅）
number_of_lines=25,              % 行数
gutter=24mm,                     % ノド側の余白
column_gap=14mm,                 % 段と段の空白
head_space=24mm,                 % 天の余白（天/地どちらか一方を指定）
%foot_space=24mm,                 % 地の余白
baselineskip=1.7zw,              % 行送り、デフォルトはjafontsizeの1.7倍
headfoot_verticalposition=1.5zw, % ノンブルと本文の間の空白
hanging_punctuation]             % ぶら下げ、組み方
{jlreq}
~~~


### 論文題目・著者名の設定

論文題目・著者は段抜き(一段組)５行取りで、題目は18pt、著者氏名は14ptである。

文字サイズと文字サイズの変更命令は次のようである。

| 変更命令            | 10pt | 11pt | 12pt |
|---------------|------|------|------|
| \tiny          | 5    | 6    | 6    |
| \scriptsize    | 7    | 8    | 8    |
| \foootnotesize | 8    | 9    | 10   |
| \small         | 9    | 10   | 11   |
| \normalsize    | 10   | 11   | 12   |
| \large         | 12   | 12   | 14   |
| \Large         | 14   | 14   | 17   |
| \LARGE         | 17   | 17   | 20   |
| \huge          | 20   | 20   | 25   |
| \Huge          | 25   | 25   | 25   |


\normalsizeがデフォルトである。

高山寺典籍文書綜合調査団の『研究報告論集』の仕様とすると、
本文11pt、
論文題目18ptは、\LARGEの17ptか\hugeの20ptが近い。
著者氏名14ptは \Largeと同じになる。



『訓点語と訓点資料』スタイル・ファイル（kunj2e11.sty）の仕様とすると、
本文11pt、
論文題目は\Hugeで20pt、
著者氏名\LARGEで17ptになる。


とりあえず、kunj2e11.styに近い設定として、次のようにしてみた。

~~~tex
\makeatletter
\def\@maketitle{
    \vspace{1.5\zw}
    \begin{flushleft}
        {\huge 　\@title \par}  
        \vspace{0.5em}  
    \end{flushleft}
    \begin{flushright}
        {\Large \@author 　　}
    \end{flushright}
    \par      
    \vspace{2\zw}  
}
~~~


### 注番号表示

jlreqには、注の形式が複数用意されている。

- 脚注 \footnote（縦組みでは傍注）
- 傍注 \sidenote（縦組みでは脚注）
- 後注 \endnote（注自身の出力は見出し直前）

後注の\endnoteは、デフォルトでは\sectionの最後
に出力される。

\jlreqsetupにendnote_positionを渡すことで制御できる。
\chapterの最後に出力するように設定。

~~~tex
\jlreqsetup{
endnote_position={_chapter}
}
~~~

注は、(1)の形式で出力される。

endnote_position={_chapter,_section}とすると、
\chapterと\sectionの直前に出力。

翻刻本文の後に、注を付ける時は、_sectionが便利。

### 参考文献一覧形式

『訓点語と訓点資料』スタイル・ファイル（kunj2e11.sty）の仕様では
残りは次の三つである。

- 凡例一覧形式（hanrei 環境）
- 参考文献一覧形式（shomeilist 環境）
- 丸括弧による注記（ポイントを落として表示する。\skakko）

凡例一覧形式は、enumerate環境を設定することで
対応する。

参考文献一覧形式と丸括弧による注記は、bibtexで対応できそうである。
